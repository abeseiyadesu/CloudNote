# CloudNote
## アプリ説明
- CloudNoteは、シンプルで使いやすいノートアプリです。
- ユーザーはノートを作成・編集・保存でき、それらのデータをFirebaseを利用してアカウントに紐づけてクラウド上に保存できます。
<br>  

## 使用言語・技術
kotlin / Android Studio / Jetpack Compose / Firebase <br>
<br>  

## アプリを作った目的
 - ログイン機能を実装し、複数端末からアクセスできるようにしたかった。
 - Firebaseという技術を知り、興味を持ったため実際に使ってみたかった。
 - Firebaseを習得することで、今後のアプリ開発においてログイン機能やクラウドデータ保存の実装が容易になり、開発の幅が広がると考えた。
<br>  

## 機能一覧
 - ログイン機能 (メール & パスワード)
 - 自動ログイン（アプリを消してもログイン情報を保持）
 - 複数アカウント対応
 - ノートをクラウド保存（Firebaseを使用）
 - 右下の作成ボタンで新規ノートを作成
 - ノートの一覧表示
 - ノートを押すと編集可能
 - ホームでノートを左スワイプすると削除ボタンが出現
 - 削除時アラート確認機能
<br>  

## 工夫した点
### **自動ログイン**
毎回ログインを求められると使いにくいため、アプリを閉じてもログイン情報を保持し、ユーザーが手動でログアウトするまでログイン状態が維持されるようにしました。
<br>  

### **スライドアニメーションによる画面遷移**
- ホーム画面 → ノート編集画面：右から左へスライド
- ノート編集画面 → ホーム画面：左から右へスライド
- これにより直感的な操作感を実現。
<br>  

### **ノート編集画面での自動保存**
ノート編集後、毎回保存ボタンを押すのは手間だと考え、画面左上の戻るボタンを押した際に「自動で保存」されるようにしました。
これにより、ユーザーの負担を軽減できのではないかと考えました。
<br>  

## 苦労した点
### Firebaseによる様々な問題
#### デバイスから謎のエラー
- ログインをしようとすると確実にエラーが出る
- 別端末でも同じことが起きる

##### 試したこと
- Firebaseの設定を見直し
- アカウントの再作成 Firebaseプロジェクトの再構成
- 別の端末で実行
<br>

##### 解決方法
- 海外の技術フォーラムを活用し、エラーログを分析。
- Firebase側の設定ミスが原因だったことを突き止め、適切な権限設定を行うことで解決。

#### テスト環境で動作したが、本番環境でデータを保存できなかった
- いきなりアプリに導入は怖かったので、テスト用アプリを作成し、テストコードを書きました
- そこでは見事動作し、本番環境で実行したところandroid studio側でエラーログが発生 Firebaseコンソールのほうでは本来何かしらのアクションがあるはずがなにも言わなかった

##### 試したこと
- firebase再構成
- 別プロジェクトを作成し、同じ環境で実行（同様のエラー発生）
- テスト環境でコードを検証（問題なし）
- なのでコードはあっている と考えこれはFirebase側で何か問題が起きていると考えた

##### 解決方法
- Firebase Authenticationに登録されたアカウントがなく、また匿名ユーザーの設定もなかったため、
- どのアカウントにデータを紐づけるのかFirebase側で判別できず保存ができない状態だった。
- 匿名ユーザーを有効化することで、データ保存が可能になった。
<br>  

## **学んだこと**
- Firebaseの基本的な仕組み（Authentication・Firestore）
- テスト環境と本番環境での挙動の違いとデバッグ方法
- 海外の技術情報の活用方法
- 既存のコードをさらにリファクタリングできるということ
<br>

最初にログイン・新規登録画面が出ます

![CloudNote_3](https://github.com/user-attachments/assets/96dc6f00-8c1a-4325-9a94-721f002ed7b7)


ログイン 新規作成するとホーム画面へ
右上のアイコンタップでログアウト
<p>
  <img src="https://github.com/user-attachments/assets/1191e392-5c64-4df8-af2e-871135a6ebf8" width="300">
  <img src="https://github.com/user-attachments/assets/09d4e2e5-d791-4d55-9f42-bd73baf3c926" width="300">
</p>

スワイプすると削除ボタンが出現
<p>
  <img src="https://github.com/user-attachments/assets/24e5c55f-0c04-4e3f-b8a4-75d0b41a0019" width="300">
  <img src="https://github.com/user-attachments/assets/e92b8c8b-eeb7-42c0-84e8-4fb9a12b8862" width="300">
</p>

編集画面

![CloudNote_2](https://github.com/user-attachments/assets/9812e4b8-2223-4886-bc15-bf309c64b52d)

右上の削除ボタンを押すと削除できます

![CloudNote_4](https://github.com/user-attachments/assets/e88b22d6-4393-4abc-b42f-f8e648b08e90)

